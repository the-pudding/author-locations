parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}],e=null;function n(t,e){var n=document.getElementsByTagName("script")[0],a=document.createElement("script");return a.src=t,a.async=!0,n.parentNode.insertBefore(a,n),e&&"function"==typeof e&&(a.onload=e),a}function a(e){var n=new XMLHttpRequest,a=Date.now(),o="https://pudding.cool/assets/data/stories.json?v=".concat(a);n.open("GET",o,!0),n.onload=function(){if(n.status>=200&&n.status<400){var a=JSON.parse(n.responseText);e(a)}else e(t)},n.onerror=function(){return e(t)},n.send()}function o(t){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(t.url,"' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(t.image,".jpg' alt='").concat(t.hed,"'>\n\t\t<p class='article__headline'>").concat(t.hed,"</p>\n\t</a>\n\t")}function r(){var t=window.location.href,n=e.filter(function(e){return!t.includes(e.url)}).slice(0,4).map(o).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){a(function(t){e=t,r()})}var c={init:s};exports.default=c;
},{}],"vL5c":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.scrollama=n()}(this,function(){"use strict";function e(e){for(var t=e.length,n=[],r=0;r<t;r+=1)n.push(e[r]);return n}function t(e){return"scrollama__debug-offset--"+e.id}function n(e){!function(e){var n=e.id,r=e.offsetVal,o=e.stepClass,i=document.createElement("div");i.setAttribute("id",t({id:n})),i.setAttribute("class","scrollama__debug-offset"),i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0px",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var s=document.createElement("p");s.innerText='".'+o+'" trigger: '+r,s.style.fontSize="12px",s.style.fontFamily="monospace",s.style.color="black",s.style.margin="0",s.style.padding="6px",i.appendChild(s),document.body.appendChild(i)}({id:e.id,offsetVal:e.offsetVal,stepClass:e.stepEl[0].getAttribute("class")})}function r(e){var n=e.id,r=(e.stepOffsetHeight,e.offsetMargin);e.offsetVal;!function(e){var n=e.id,r=e.offsetMargin,o=(e.offsetVal,t({id:n}));document.querySelector("#"+o).style.top=r+"px"}({id:n,offsetMargin:r})}function o(e){var t=e.id,n=e.index,r=e.state,o=function(e){return"scrollama__debug-step--"+e.id+"-"+e.i}({id:t,i:n}),i=document.querySelector("#"+o+"_above"),s=document.querySelector("#"+o+"_below"),a="enter"===r?"block":"none";i&&(i.style.display=a),s&&(s.style.display=a)}return function(){var t=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],i={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},s={},a=null,c=[],l=[],u=[],f=[],d=0,p=0,v=0,g=0,m=0,b=0,w=!1,h=!1,x=!1,y=!1,E=!1,M=!1,O="down",S=[];function A(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function I(e){return+e.getAttribute("data-scrollama-index")}function C(){window.pageYOffset>m?O="down":window.pageYOffset<m&&(O="up"),m=window.pageYOffset}function H(e){s[e]&&s[e].forEach(function(e){return e.disconnect()})}function k(){var e,t;v=window.innerHeight,e=document.body,t=document.documentElement,g=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),p=d*v,w&&(l=c.map(function(e){return e.getBoundingClientRect().height}),u=c.map(A),h&&z()),x&&r({id:a,stepOffsetHeight:l,offsetMargin:p,offsetVal:d})}function q(e){if(e&&!h){if(!w)return console.error("scrollama error: enable() called before scroller was ready"),void(h=!1);z()}!e&&h&&t.forEach(H),h=e}function _(e,t){var n=I(e);void 0!==t&&(f[n].progress=t);var r={element:e,index:n,progress:f[n].progress};"enter"===f[n].state&&i.stepProgress(r)}function N(e,t){if("above"===t)for(var n=0;n<e;n+=1){var r=f[n];"enter"!==r.state&&"down"!==r.direction?(P(c[n],"down",!1),R(c[n],"down")):"enter"===r.state&&R(c[n],"down")}else if("below"===t)for(var o=f.length-1;o>e;o-=1){var i=f[o];"enter"===i.state&&R(c[o],"up"),"down"===i.direction&&(P(c[o],"up",!1),R(c[o],"up"))}}function P(e,t,n){void 0===n&&(n=!0);var r=I(e),s={element:e,index:r,direction:t};f[r].direction=t,f[r].state="enter",E&&n&&"down"===t&&N(r,"above"),E&&n&&"up"===t&&N(r,"below"),i.stepEnter&&!S[r]&&(i.stepEnter(s,f),x&&o({id:a,index:r,state:"enter"}),M&&(S[r]=!0)),y&&_(e)}function R(e,t){var n=I(e),r={element:e,index:n,direction:t};y&&("down"===t&&f[n].progress<1?_(e,1):"up"===t&&f[n].progress>0&&_(e,0)),f[n].direction=t,f[n].state="exit",i.stepExit(r,f),x&&o({id:a,index:n,state:"exit"})}function V(e){var t=e[0];C();var n=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.top,s=r.bottom,a=i-p,c=s-p,l=I(o),u=f[l];n&&a<=0&&c>=0&&"down"===O&&"enter"!==u.state&&P(o,O),!n&&a>0&&"up"===O&&"enter"===u.state&&R(o,O)}function B(e){var t=e[0];C();var n=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.top,s=r.bottom,a=i-p,c=s-p,l=I(o),u=f[l];n&&a<=0&&c>=0&&"up"===O&&"enter"!==u.state&&P(o,O),!n&&c<0&&"down"===O&&"enter"===u.state&&R(o,O)}function T(e){var t=e[0];C();var n=t.isIntersecting,r=t.target,o=I(r),i=f[o];n&&"down"===O&&"down"!==i.direction&&"enter"!==i.state&&(P(r,"down"),R(r,"down"))}function Y(e){var t=e[0];C();var n=t.isIntersecting,r=t.target,o=I(r),i=f[o];n&&"up"===O&&"down"===i.direction&&"enter"!==i.state&&(P(r,"up"),R(r,"up"))}function j(e){var t=e[0];C();var n=t.isIntersecting,r=t.intersectionRatio,o=t.boundingClientRect,i=t.target,s=o.bottom;n&&s-p>=0&&_(i,+r.toFixed(3))}function F(){s.stepProgress=c.map(function(e,t){var n=l[t]-p+"px 0px "+(-v+p)+"px 0px",r=function(e){for(var t=Math.ceil(e/b),n=[],r=1/t,o=0;o<t;o+=1)n.push(o*r);return n}(l[t]),o=new IntersectionObserver(j,{rootMargin:n,threshold:r});return o.observe(e),o})}function z(){t.forEach(H),s.viewportAbove=c.map(function(e,t){var n=g-u[t],r=p-v-l[t],o=new IntersectionObserver(T,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o}),s.viewportBelow=c.map(function(e,t){var n=-p-l[t],r=p-v+l[t]+g,o=new IntersectionObserver(Y,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o}),s.stepAbove=c.map(function(e,t){var n=-p+l[t],r=new IntersectionObserver(V,{rootMargin:n+"px 0px "+(p-v)+"px 0px"});return r.observe(e),r}),s.stepBelow=c.map(function(e,t){var n=-p,r=p-v+l[t],o=new IntersectionObserver(B,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o}),y&&F()}function D(e){return!(!e||1!==e.nodeType)&&(function(e){var t=window.getComputedStyle(e);return("scroll"===t.overflowY||"auto"===t.overflowY)&&e.scrollHeight>e.clientHeight}(e)?e:D(e.parentNode))}var L={};return L.setup=function(t){var r=t.step,o=t.offset;void 0===o&&(o=.5);var i=t.progress;void 0===i&&(i=!1);var s=t.threshold;void 0===s&&(s=4);var l=t.debug;void 0===l&&(l=!1);var u=t.order;void 0===u&&(u=!0);var p,v,g,m,h,O=t.once;if(void 0===O&&(O=!1),v=(p="abcdefghijklmnopqrstuv").length,g=Date.now(),a=""+[0,0,0].map(function(e){return p[Math.floor(Math.random()*v)]}).join("")+g,m=r,void 0===h&&(h=document),!(c="string"==typeof m?e(h.querySelectorAll(m)):m instanceof Element?e([m]):m instanceof NodeList?e(m):m instanceof Array?m:[]).length)return console.error("scrollama error: no step elements"),L;var S=c.reduce(function(e,t){return e||D(t.parentNode)},!1);return S&&console.error("scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.",S),x=l,y=i,E=u,M=O,L.offsetTrigger(o),b=Math.max(1,+s),w=!0,x&&n({id:a,stepEl:c,offsetVal:d}),c.forEach(function(e,t){return e.setAttribute("data-scrollama-index",t)}),f=c.map(function(){return{direction:null,state:null,progress:0}}),k(),L.enable(),L},L.resize=function(){return k(),L},L.enable=function(){return q(!0),L},L.disable=function(){return q(!1),L},L.destroy=function(){q(!1),Object.keys(i).forEach(function(e){i[e]=null}),Object.keys(s).forEach(function(e){s[e]=null})},L.offsetTrigger=function(e){return e&&!isNaN(e)?(e>1&&console.error("scrollama error: offset value is greater than 1. Fallbacks to 1."),e<0&&console.error("scrollama error: offset value is lower than 0. Fallbacks to 0."),d=Math.min(Math.max(0,e),1),L):(isNaN(e)&&console.error("scrollama error: offset value is not a number. Fallbacks to 0."),d)},L.onStepEnter=function(e){return"function"==typeof e?i.stepEnter=e:console.error("scrollama error: onStepEnter requires a function"),L},L.onStepExit=function(e){return"function"==typeof e?i.stepExit=e:console.error("scrollama error: onStepExit requires a function"),L},L.onStepProgress=function(e){return"function"==typeof e?i.stepProgress=e:console.error("scrollama error: onStepProgress requires a function"),L},L}});
},{}],"xZJw":[function(require,module,exports) {
"use strict";function t(t){return new Promise(function(e,n){var r=t.split(".").pop();"csv"===r?d3.csv("assets/data/".concat(t)).then(e).catch(n):"json"===r?d3.json("assets/data/".concat(t)).then(e).catch(n):n(new Error("unsupported file type for: ".concat(t)))})}function e(e){if("string"==typeof e)return t(e);var n=e.map(t);return Promise.all(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XoEi":[function(require,module,exports) {
d3.selection.prototype.puddingChartArcHistogram=function(t){var n=this.nodes().map(function(n){var a=d3.select(n),e=null,r=null,o=a.datum(),c=function(){return!1},i=t.binSize,s=t.maxBin,u=0,d=0,l=0,f=0,p=0,h=0,g=d3.scaleLinear(),b=d3.scaleLinear(),v=d3.scaleBand();function m(t){var n=t.distance,a=.51*g(n),e=b(n),r=g(n);return"M0,0 A".concat(a,",").concat(e," 0 0,1 ").concat(r,",0")}function k(){var t=d3.select(this),n=t.node().getTotalLength();t.attr("stroke-dasharray","".concat(n," ").concat(n)).attr("stroke-dashoffset",n)}function y(t){var n=t.append("g").attr("class","book");return n.append("path").attr("d",m).each(k),n.append("text").text(function(t){return t.book_title}),n}function x(t){return t.append("g").attr("class","bin")}function A(t){var n=t.append("g").attr("class","book");return n.attr("transform",function(t,n){return"translate(0, ".concat(n*p+h,")")}).style("opacity",0),n.append("rect").attr("x",0).attr("y",0),n}var w={init:function(){(e=a.append("svg").attr("class","pudding-chart")).append("g").attr("class","g-axis"),(r=e.append("g").attr("class","g-vis")).append("g").attr("class","arc"),r.append("g").attr("class","hist");var t=d3.extent(o,function(t){return t.distance});g.domain(t).nice(),b.domain(t).nice();var n=d3.range(0,g.domain()[1],i);v.domain(n)},resize:function(){return u=a.node().offsetWidth-l-f,d=a.node().offsetHeight-0-8,e.attr("width",u+l+f).attr("height",d+0+8),g.range([0,u]),b.range([0,.35*d]),v.range([0,u]),l=v.bandwidth(),f=l,p=Math.floor((.65*d-8)/s),h=.35*d+8,w},render:function(){r.attr("transform","translate(".concat(l,", ").concat(0,")"));var t=o.filter(c),n=d3.nest().key(function(t){return t.bin}).entries(t);n.forEach(function(t){t.values.sort(function(t,n){return d3.descending(t.top,n.top)})}),r.select(".arc").selectAll(".book").data(t,function(t){return t.book_title}).join(y).select("path").attr("transform",function(){return"translate(0, ".concat(b.range()[1],")")}).transition().delay(function(n,a){return t.length>2?20*n.bin:0}).duration(1e3).ease(d3.easeCubicInOut).attr("stroke-dashoffset",0);var a=r.select(".hist").attr("transform","translate(".concat(i/2,", 0)")).selectAll(".bin").data(n,function(t){return t.key}).join(x);a.attr("transform",function(t){var n=v(+t.key*i)-i/2;return"translate(".concat(n,", 0)")});var e=a.selectAll(".book").data(function(t){return t.values},function(t){return t.book_title}).join(A);return e.select("rect").attr("width",v.bandwidth()).attr("height",p),e.transition().duration(1e3).delay(function(n,a){return t.length>2?20*n.bin:0}).ease(d3.easeCubicInOut).attr("transform",function(t,n){return"translate(0, ".concat(n*p+h,")")}).style("opacity",1),w},data:function(t){return arguments.length?(o=t,a.datum(o),w):o},filter:function(t){return arguments.length?(c=t,w):c}};return w.init(),w});return n.length>1?n:n.pop()};
},{}],"GapP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("scrollama")),t=n(require("./load-data"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}require("./pudding-chart/arc-histogram");var c=d3.select('[data-js="distance"]'),u=c.select('[data-js="distance__figure"]'),a=c.select('[data-js="distance__article"]'),s=a.selectAll('[data-js="article__step"]'),l=(0,e.default)(),d=0,f=null;function p(){d=c.node().offsetWidth<960?20:10;var e=Math.floor(.75*window.innerHeight);s.style("height","".concat(e,"px")),s.style("margin-top",function(e,t){return 0===t?"".concat(.5*-window.innerHeight,"px"):0})}function b(){p(),l.resize()}function h(e){var t=e.index;s.classed("is-active",function(e,n){return n===t}),0===t&&f.filter(function(e){return["White Teeth"].includes(e.book_title)}).render(),1===t&&f.filter(function(e){return["White Teeth","2666"].includes(e.book_title)}).render(),2===t&&f.filter(function(e){return!0}).render()}function g(e){var t=e.map(function(e){return i({},e,{distance:+e.distance,bin:Math.floor(+e.distance/d),top:"White Teeth"===e.book_title})}),n=d3.nest().key(function(e){return e.book_title}).rollup(function(e){var t=e.map(function(e){return e.setting}),n=e.map(function(e){return e.residence}),r=e[0];return{book_title:r.book_title,author_name:r.author_name,distance:r.distance,setting:t,residence:n,bin:r.bin,top:r.top}}).entries(t).map(function(e){return e.value});return n.sort(function(e,t){return d3.ascending(e.distance,t.distance)}),n}function v(){l.setup({step:"#distance article .step",offset:.33,debug:!1}).onStepEnter(h)}function _(e){p();var t=g(e),n=d3.max(d3.nest().key(function(e){return e.bin}).entries(t),function(e){return e.values.length});(f=u.datum(t).puddingChartArcHistogram({binSize:d,maxBin:n})).resize(),v(),b()}function m(){(0,t.default)("top-100.csv").then(_)}var y={init:m,resize:b};exports.default=y;
},{"scrollama":"vL5c","./load-data":"xZJw","./pudding-chart/arc-histogram":"XoEi"}],"epB2":[function(require,module,exports) {
"use strict";var e=d(require("lodash.debounce")),i=d(require("./utils/is-mobile")),s=d(require("./footer")),t=d(require("./graphic-distance"));function d(e){return e&&e.__esModule?e:{default:e}}var l=d3.select("body"),r=0;function a(){var e=l.node().offsetWidth;r!==e&&(r=e,t.default.resize())}function c(){if(l.select("header").classed("is-sticky")){var e=l.select(".header__menu"),i=l.select(".header__toggle");i.on("click",function(){var s=e.classed("is-visible");e.classed("is-visible",!s),i.classed("is-visible",!s)})}}function n(){l.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,e.default)(a,150)),c(),t.default.init()}n();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./footer":"v9Q8","./graphic-distance":"GapP"}]},{},["epB2"], null)